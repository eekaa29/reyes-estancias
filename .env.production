# =====================================================
# CONFIGURACIÓN DE PRODUCCIÓN - REYES ESTANCIAS
# =====================================================
# IMPORTANTE: Este archivo contiene la configuración para producción.
# Antes de usar, DEBES actualizar todos los valores marcados con <CAMBIAR>

# =====================================================
# Django Core Settings
# =====================================================
# CRÍTICO: Genera tu propia SECRET_KEY con este comando:
# python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=<CAMBIAR: genera_tu_propia_secret_key>

# CRÍTICO: SIEMPRE False en producción
DEBUG=False

# IMPORTANTE: Añadir tu dominio de producción
ALLOWED_HOSTS=reyes-estancias.com,www.reyes-estancias.com

# =====================================================
# Site Configuration
# =====================================================
# IMPORTANTE: URL base de tu sitio (usado por Celery para webhooks)
SITE_BASE_URL=https://reyes-estancias.com

# =====================================================
# Stripe Configuration (MODO PRODUCCIÓN - LIVE)
# =====================================================
# CRÍTICO: DEBES cambiar estas claves a las claves LIVE de Stripe
# Instrucciones:
# 1. Ir a https://dashboard.stripe.com/apikeys
# 2. Copiar las claves de producción (empiezan con sk_live_ y pk_live_)
# 3. Reemplazar los valores abajo

STRIPE_SECRET_KEY=<CAMBIAR: sk_live_TU_CLAVE_SECRETA_AQUI>
STRIPE_PUBLISHABLE_KEY=<CAMBIAR: pk_live_TU_CLAVE_PUBLICA_AQUI>

# IMPORTANTE: Crear nuevo webhook en producción
# Instrucciones:
# 1. Ir a https://dashboard.stripe.com/webhooks
# 2. Añadir endpoint: https://reyes-estancias.com/payments/webhook/
# 3. Seleccionar eventos: payment_intent.succeeded, payment_intent.payment_failed
# 4. Copiar el webhook secret (whsec_...)
STRIPE_WEBHOOK_SECRET=<CAMBIAR: whsec_TU_WEBHOOK_SECRET_AQUI>

# =====================================================
# Database Configuration (Producción)
# =====================================================
# IMPORTANTE: Configurar base de datos de producción
DB_NAME=reyes_estancias_prod
DB_USER=reyes_web_prod
DB_PASSWORD=<CAMBIAR: password_muy_seguro_aqui>
DB_HOST=<CAMBIAR: IP_o_hostname_del_servidor_mysql>
DB_PORT=3306

# Solo si usas Docker en producción (generalmente no)
MYSQL_ROOT_PASSWORD=<CAMBIAR: password_root_muy_seguro>

# =====================================================
# Email Configuration (Producción)
# =====================================================
# IMPORTANTE: Cambiar de Mailtrap a servicio real
# Opción 1: Gmail (recomendado para empezar)
EMAIL_HOST=smtp.gmail.com
EMAIL_HOST_USER=<CAMBIAR: tu_email@gmail.com>
EMAIL_HOST_PASSWORD=<CAMBIAR: tu_app_password_de_gmail>
EMAIL_PORT=587
EMAIL_USE_TLS=True

# Opción 2: SendGrid (si usas SendGrid)
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_HOST_USER=apikey
# EMAIL_HOST_PASSWORD=<CAMBIAR: tu_api_key_de_sendgrid>
# EMAIL_PORT=587
# EMAIL_USE_TLS=True

# Opción 3: AWS SES (si usas AWS)
# EMAIL_HOST=email-smtp.us-east-1.amazonaws.com
# EMAIL_HOST_USER=<CAMBIAR: tu_smtp_username>
# EMAIL_HOST_PASSWORD=<CAMBIAR: tu_smtp_password>
# EMAIL_PORT=587
# EMAIL_USE_TLS=True

# Configuración adicional de email
DEFAULT_FROM_EMAIL=noreply@reyes-estancias.com
SERVER_EMAIL=admin@reyes-estancias.com

# =====================================================
# Celery/Redis Configuration (Producción)
# =====================================================
# IMPORTANTE: Actualizar con URL de Redis de producción
# Opción 1: Redis local en el servidor
CELERY_BROKER_URL=redis://127.0.0.1:6379/0
CELERY_RESULT_BACKEND=redis://127.0.0.1:6379/1

# Opción 2: Redis en servicio externo (Railway, Redis Cloud, etc)
# CELERY_BROKER_URL=redis://<CAMBIAR: tu_redis_host>:6379/0
# CELERY_RESULT_BACKEND=redis://<CAMBIAR: tu_redis_host>:6379/1

# Opción 3: Redis con autenticación
# CELERY_BROKER_URL=redis://:<CAMBIAR: password>@<CAMBIAR: host>:6379/0
# CELERY_RESULT_BACKEND=redis://:<CAMBIAR: password>@<CAMBIAR: host>:6379/1

# =====================================================
# Security Settings (Producción)
# =====================================================
# CRÍTICO: Estas configuraciones activan HTTPS y cookies seguras
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# =====================================================
# iCal Configuration
# =====================================================
# Configuración de caché para calendarios (en segundos)
ICAL_CACHE_TIMEOUT=900  # 15 minutos (recomendado para producción)

# Timeout para peticiones HTTP a calendarios externos
ICAL_REQUEST_TIMEOUT=10  # 10 segundos

# Tamaño máximo de archivos iCal (en bytes)
ICAL_MAX_SIZE=5242880  # 5 MB

# Hosts permitidos para importar calendarios
ICAL_ALLOWED_HOSTS=airbnb.com,airbnb.es,airbnb.mx,calendar.google.com,booking.com,vrbo.com,homeaway.com

# =====================================================
# Logging Configuration (Producción)
# =====================================================
# Directorio para logs (asegúrate de que exista y tenga permisos)
# En producción, usa /var/log/reyes_estancias
# Comandos para crear directorio:
#   sudo mkdir -p /var/log/reyes_estancias
#   sudo chown tu_usuario:tu_usuario /var/log/reyes_estancias
#   sudo chmod 755 /var/log/reyes_estancias
LOG_DIR=/var/log/reyes_estancias

# Nivel de logging en producción (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Email del administrador para recibir notificaciones de errores críticos
ADMIN_EMAIL=admin@reyes-estancias.com

# =====================================================
# NPM Configuration (si usas django-tailwind)
# =====================================================
# Dejar en blanco para usar npm del sistema
NPM_BIN_PATH=

# =====================================================
# NOTAS IMPORTANTES
# =====================================================
# 1. NO compartas este archivo en repositorios públicos
# 2. Añade .env.production a .gitignore
# 3. Usa valores DIFERENTES a los de desarrollo para seguridad
# 4. Cambia TODAS las variables marcadas con <CAMBIAR>
# 5. Verifica que DEBUG=False SIEMPRE en producción
# 6. Guarda una copia segura de este archivo (encriptada)
# 7. Ejecuta python scripts/pre_deploy_check.py antes de deployment
